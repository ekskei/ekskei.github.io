import{_ as e,V as a,W as s,Z as n}from"./framework-e5211252.js";const i={},d=n(`<h1 id="mysql-8-0-开启远程访问" tabindex="-1"><a class="header-anchor" href="#mysql-8-0-开启远程访问" aria-hidden="true">#</a> MySQL 8.0+ 开启远程访问</h1><p>MySQL 服务器默认绑定的地址是 127.0.0.1，只能通过 localhost 访问。如果想进行远程访问，需要进行一些简单的设置。</p><p>网上搜到的很多资料都是基于老版本的，已经过时。 MySQL 官方文档写得过于详细（复杂）。所以特意写一篇文章记录一下配置过程。</p><h2 id="添加root密码" tabindex="-1"><a class="header-anchor" href="#添加root密码" aria-hidden="true">#</a> 添加root密码</h2><p>这一步不是必须的，可跳过。在 Windows 上安装 MySQL 过程中是可以在安装界面设置 root 密码的，但是在 Ubuntu 上用 apt 安装的 MySQL 是默认没有密码的，不安全，所以先添加密码。 首先通过以下命令登录MySQL：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后输入以下两条命令添加密码：</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>use mysql;
alter user &#39;root&#39;@&#39;localhost&#39; identified with mysql_native_password by &#39;password&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：引号内的 password 需改为自己的密码。</p><h2 id="更改服务器绑定地址" tabindex="-1"><a class="header-anchor" href="#更改服务器绑定地址" aria-hidden="true">#</a> 更改服务器绑定地址</h2><p>更改配置文件 /etc/mysql/mysql.conf.d/mysqld.cnf</p><p>PS： Windows 下的配置文件为 C:\\ProgramData\\MySQL\\MySQL Server 8.0\\my.ini</p><p>将 [mysqld] 节点下的 bind-address 由原来的 127.0.0.1 改为 0.0.0.0</p><p>然后重启 MySQL 服务，命令为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="添加远程访问用户" tabindex="-1"><a class="header-anchor" href="#添加远程访问用户" aria-hidden="true">#</a> 添加远程访问用户</h2><p>首先登录 MySQL，然后依次输入以下命令：</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>use mysql;
create user &#39;username&#39;@&#39;host&#39; identified by &#39;password&#39;; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：引号内的值，需要根据实际需求进行设置。其中 username 为用户名； host 为登录域名，为 localhost 时表示本机，为 % 时表示任意 IP ，也可以像 192.168.1.% 这样，表示允许 192.168.1 这个段的所有 IP ； password 为密码。</p><p>然后输入以下命令，确认是否添加成功：</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>select User,Host from user;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="为远程访问用户授权" tabindex="-1"><a class="header-anchor" href="#为远程访问用户授权" aria-hidden="true">#</a> 为远程访问用户授权</h2><p>还是在上面的 MySQL 命令窗口中</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>grant all privileges on *.* to &#39;username&#39;@&#39;host&#39; with grant option; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中*.<em>第一个</em>表示所有数据库，第二个<em>表示所有数据表，如果不想授权全部那就把对应的</em>写成相应数据库或者数据表； username 为指定的用户； host 为该用户登录的域名</p><p>授权操作完后刷新权限：</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>flush privileges;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这一步完成之后，就可以进行远程访问了。</p><h2 id="附-收回权限和删除用户" tabindex="-1"><a class="header-anchor" href="#附-收回权限和删除用户" aria-hidden="true">#</a> 附：收回权限和删除用户</h2><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>#收回权限（不包含赋权权限）
REVOKE ALL PRIVILEGES ON *.* FROM username;
REVOKE ALL PRIVILEGES ON username.* FROM username;

#收回赋权权限
REVOKE GRANT OPTION ON *.* FROM username;

#操作完后刷新权限
flush privileges;

#删除用户
drop user &#39;username&#39;@&#39;host&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,32),r=[d];function l(c,t){return a(),s("div",null,r)}const o=e(i,[["render",l],["__file","MySQL8.0_开启远程访问.html.vue"]]);export{o as default};
